{"version":3,"file":"383.bundled.js","mappings":"mBACO,SAASA,EAAKC,GACjB,MAAMC,EAA4B,GAC5BC,EAA0B,GAC1BC,ECJH,SAAuBH,EAASI,EAAQC,GAC3C,IAAIF,EACJ,GAAIC,aAAkBE,OAClBH,EAAwBH,EAAQI,QAAQG,GAAWC,QAAQD,EAAOE,MAAMC,MAAMN,WAE7E,GAAIC,EACLF,EAAwBH,EAAQI,QAAQG,GAAWA,EAAOE,MAAME,SAASP,SAExE,CACD,MAAMQ,EAAkBR,EAAOS,cAC/BV,EAAwBH,EAAQI,QAAQG,GAAWA,EAAOE,MAAMI,cAAcF,SAASC,IAC3F,CACA,OAAOT,CACX,CDTkCW,CAAcd,EAAQe,aAAcf,EAAQI,OAAQJ,EAAQK,eACpFW,EAAiB,IAAIC,IAAIjB,EAAQkB,SAASC,IAAIC,IACpD,IAAIC,GAAiB,EACjBC,GAAe,EACnB,IAAK,IAAIC,EAAQ,EAAGA,EAAQpB,EAAsBqB,OAAQD,IAAS,CAC/D,MAAMhB,EAASJ,EAAsBoB,GAC/BE,EAAQL,EAAgBb,EAAOkB,OAC/BC,EAAaV,EAAeW,IAAIF,GACtC,GAAIxB,EAA0BuB,OAASxB,EAAQ4B,wBAC3C1B,EAAwBsB,OAASxB,EAAQ6B,qBACzC,MAEAH,EACIxB,EAAwBsB,OAASxB,EAAQ6B,qBACzC3B,EAAwB4B,KAAKvB,GAG7Be,GAAe,EAIfrB,EAA0BuB,OAASxB,EAAQ4B,uBAC3C3B,EAA0B6B,KAAKvB,GAG/Bc,GAAiB,CAG7B,CACA,MAAO,CACHpB,4BACAC,0BACAmB,iBACAC,eAER,CAMA,SAASF,EAAgBK,GACrB,MAAwB,iBAAVA,GAAgC,OAAVA,EAAiBM,KAAKC,UAAUP,GAASA,CACjF,CE3CA,MAWMQ,EAAc,IAAIC,IAClBC,EAAY,CAAC,EAEnBC,KAAKC,iBAAiB,WAAYC,IAC9B,MAAMC,EAAUD,EAAEE,KAEbP,EAAYN,IAAIY,EAAQE,KACzBR,EAAYS,IAAIH,EAAQE,GAjBrB,CACH1B,aAAc,GACdX,OAAQ,GACRc,SAAU,GACVU,uBAAwB,IACxBC,qBAAsB,IACtBxB,eAAe,IAcnB,MAAML,EAAUiC,EAAYU,IAAIJ,EAAQE,IAExC,OAAQF,EAAQK,MACZ,IAAK,WACD5C,EAAQe,aAAewB,EAAQM,MAC/B,MAEJ,IAAK,YACD7C,EAAQI,OAASmC,EAAQnC,OACzB,MAEJ,IAAK,cACDJ,EAAQkB,SAAWqB,EAAQrB,SAC3B,MAEJ,IAAK,cACDlB,EAAQ4B,uBAAyBW,EAAQX,uBACzC5B,EAAQ6B,qBAAuBU,EAAQV,qBACvC7B,EAAQK,cAAgBkC,EAAQlC,cAChC,MAEJ,IAAK,QAED,YADA4B,EAAYa,OAAOP,EAAQE,IAO/BF,EAAQE,MAAMN,GACdY,aAAaZ,EAAUI,EAAQE,KAGnCN,EAAUI,EAAQE,IAAMO,YAAW,KAC/B,MAAMC,EAASlD,EAAKC,GACpBoC,KAAKc,YAAY,CAAET,GAAIF,EAAQE,GAAIG,KAAM,YAAaK,GAAS,GAChE,GAAG,G","sources":["webpack://@galaxyproject/galaxy-client/./src/components/Form/Elements/FormSelectMany/worker/selectManyMain.ts","webpack://@galaxyproject/galaxy-client/./src/components/Form/Elements/FormSelectMany/worker/filterOptions.ts","webpack://@galaxyproject/galaxy-client/./src/components/Form/Elements/FormSelectMany/worker/selectMany.worker.js"],"sourcesContent":["import { filterOptions } from \"./filterOptions\";\nexport function main(options) {\n    const unselectedOptionsFiltered = [];\n    const selectedOptionsFiltered = [];\n    const filteredSelectOptions = filterOptions(options.optionsArray, options.filter, options.caseSensitive);\n    const selectedValues = new Set(options.selected.map(stringifyObject));\n    let moreUnselected = false;\n    let moreSelected = false;\n    for (let index = 0; index < filteredSelectOptions.length; index++) {\n        const option = filteredSelectOptions[index];\n        const value = stringifyObject(option.value);\n        const isSelected = selectedValues.has(value);\n        if (unselectedOptionsFiltered.length > options.unselectedDisplayCount &&\n            selectedOptionsFiltered.length > options.selectedDisplayCount) {\n            break;\n        }\n        if (isSelected) {\n            if (selectedOptionsFiltered.length < options.selectedDisplayCount) {\n                selectedOptionsFiltered.push(option);\n            }\n            else {\n                moreSelected = true;\n            }\n        }\n        else {\n            if (unselectedOptionsFiltered.length < options.unselectedDisplayCount) {\n                unselectedOptionsFiltered.push(option);\n            }\n            else {\n                moreUnselected = true;\n            }\n        }\n    }\n    return {\n        unselectedOptionsFiltered,\n        selectedOptionsFiltered,\n        moreUnselected,\n        moreSelected,\n    };\n}\n/**\n * Convert object to strings, leaving every other value unchanged\n * @param value\n * @returns\n */\nfunction stringifyObject(value) {\n    return typeof value === \"object\" && value !== null ? JSON.stringify(value) : value;\n}\n","export function filterOptions(options, filter, caseSensitive) {\n    let filteredSelectOptions;\n    if (filter instanceof RegExp) {\n        filteredSelectOptions = options.filter((option) => Boolean(option.label.match(filter)));\n    }\n    else if (caseSensitive) {\n        filteredSelectOptions = options.filter((option) => option.label.includes(filter));\n    }\n    else {\n        const filterLowercase = filter.toLowerCase();\n        filteredSelectOptions = options.filter((option) => option.label.toLowerCase().includes(filterLowercase));\n    }\n    return filteredSelectOptions;\n}\n","import { main } from \"./selectManyMain\";\n\n// glue code to run `main` in a thread\n\nconst createOptions = () => {\n    return {\n        optionsArray: [],\n        filter: \"\",\n        selected: [],\n        unselectedDisplayCount: 1000,\n        selectedDisplayCount: 1000,\n        caseSensitive: false,\n    };\n};\n\nconst optionsById = new Map();\nconst timerById = {};\n\nself.addEventListener(\"message\", (e) => {\n    const message = e.data;\n\n    if (!optionsById.has(message.id)) {\n        optionsById.set(message.id, createOptions());\n    }\n\n    const options = optionsById.get(message.id);\n\n    switch (message.type) {\n        case \"setArray\":\n            options.optionsArray = message.array;\n            break;\n\n        case \"setFilter\":\n            options.filter = message.filter;\n            break;\n\n        case \"setSelected\":\n            options.selected = message.selected;\n            break;\n\n        case \"setSettings\":\n            options.unselectedDisplayCount = message.unselectedDisplayCount;\n            options.selectedDisplayCount = message.selectedDisplayCount;\n            options.caseSensitive = message.caseSensitive;\n            break;\n\n        case \"clear\":\n            optionsById.delete(message.id);\n            return;\n\n        default:\n            break;\n    }\n\n    if (message.id in timerById) {\n        clearTimeout(timerById[message.id]);\n    }\n\n    timerById[message.id] = setTimeout(() => {\n        const result = main(options);\n        self.postMessage({ id: message.id, type: \"result\", ...result });\n    }, 10);\n});\n"],"names":["main","options","unselectedOptionsFiltered","selectedOptionsFiltered","filteredSelectOptions","filter","caseSensitive","RegExp","option","Boolean","label","match","includes","filterLowercase","toLowerCase","filterOptions","optionsArray","selectedValues","Set","selected","map","stringifyObject","moreUnselected","moreSelected","index","length","value","isSelected","has","unselectedDisplayCount","selectedDisplayCount","push","JSON","stringify","optionsById","Map","timerById","self","addEventListener","e","message","data","id","set","get","type","array","delete","clearTimeout","setTimeout","result","postMessage"],"sourceRoot":""}