"use strict";(self.webpackChunk_galaxyproject_galaxy_client=self.webpackChunk_galaxyproject_galaxy_client||[]).push([[621],{85299:(t,e,n)=>{n.r(e),n.d(e,{autoLayout:()=>p});var i=n(17295),o=n.n(i),s=n(78477),a=n(69678),r=n(85489),c=function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function a(t){try{c(i.next(t))}catch(t){s(t)}}function r(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,r)}c((i=i.apply(t,e||[])).next())}))};const u=new(o());function p(t,e){var n;return c(this,void 0,void 0,(function*(){const i=(0,s.PB)(t),o=(0,a.l)(t),c={id:"",layoutOptions:{"elk.algorithm":"layered","crossingMinimization.semiInteractive":"true","nodePlacement.strategy":"NETWORK_SIMPLEX"},children:[],edges:[]};c.children=Object.entries(e).map((([t,e])=>{const n=Object.values(e.inputs).map((n=>({id:`${t}/in/${n.name}`,properties:{"port.side":"WEST","port.index":e.id}}))),i=Object.values(e.outputs).map((n=>({id:`${t}/out/${n.name}`,properties:{"port.side":"EAST","port.index":e.id}}))),s=o.stepPosition[e.id];return(0,r.Nh)(s,`No StepPosition with step id ${e.id} found in workflowStateStore`),{id:t,height:s.height+20,width:s.width+60,ports:n.concat(i)}})),c.edges=i.connections.map((t=>({id:`e_${t.input.stepId}_${t.output.stepId}`,sources:[`${t.output.stepId}/out/${t.output.name}`],targets:[`${t.input.stepId}/in/${t.input.name}`]})));try{const t=yield u.layout(c);return null===(n=t.children)||void 0===n?void 0:n.map((t=>Object.assign(Object.assign({},e[t.id]),{position:{top:t.y,left:t.x}})))}catch(t){console.error(t)}}))}}}]);
//# sourceMappingURL=workflowLayout.bundled.js.map